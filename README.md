# üß© LocoTool ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–≥—Ä–æ–≤—ã—Ö / –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤

**LocoTool** ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è, –ø–µ—Ä–µ–≤–æ–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–±–æ—Ä–∫–∏
–ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —Å—Ç—Ä–æ–∫–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã —Å–∏–º–≤–æ–ª–æ–º `#`.

–ü—Ä–æ–µ–∫—Ç –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç:
- Python-–ø–∞—Ä—Å–µ—Ä (—á–µ—Ä–µ–∑ CSnakes) –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å—Ç—Ä–æ–∫;
- REST-–∫–ª–∏–µ–Ω—Ç **Yandex Cloud Translate API v2** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞;
- –ø–æ–¥–¥–µ—Ä–∂–∫—É **–≥–ª–æ—Å—Å–∞—Ä–∏–µ–≤** (—Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä—ã src‚Üídst);
- –ø–æ–ª–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ `config.json`.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

| –ö–æ–º–∞–Ω–¥–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|----------|-------------|
| `extract`  | –ò–∑–≤–ª–µ–∫–∞–µ—Ç –≤—Å–µ –ø–µ—Ä–µ–≤–æ–¥–∏–º—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã (CJK-—Ç–µ–∫—Å—Ç) –≤ `.tsv` / `.csv` —Ñ–∞–π–ª. |
| `translate`| –ü–µ—Ä–µ–≤–æ–¥–∏—Ç —Ç–∞–±–ª–∏—Ü—É —Å –ø–æ–º–æ—â—å—é –Ø–Ω–¥–µ–∫—Å API, –∑–∞–ø–æ–ª–Ω—è—è –∫–æ–ª–æ–Ω–∫—É `translated_text`. |
| `apply`    | –ü—Ä–∏–º–µ–Ω—è–µ—Ç –ø–µ—Ä–µ–≤–æ–¥—ã –æ–±—Ä–∞—Ç–Ω–æ –≤ –∏—Å—Ö–æ–¥–Ω—ã–π `.txt`, —Å–æ—Ö—Ä–∞–Ω—è—è —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ `#`. |
| `all`      | –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: `extract ‚Üí translate ‚Üí apply` –≤ –æ–¥–∏–Ω —à–∞–≥. |

---

## üß∞ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Å–±–æ—Ä–∫–∞

```bash
git clone https://github.com/locky37/LocoTool.git
cd LocoTool
dotnet build -c Release
````

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä—è–¥–æ–º —Å –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–º –ª–µ–∂–∞—Ç:

```
LocoTool/
 ‚îú‚îÄ LocoTool.exe
 ‚îú‚îÄ config.json
 ‚îú‚îÄ glossary.json
 ‚îî‚îÄ locotool.py
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`config.json`)

```json
{
  "Yandex": {
    "ApiKey": "AQVNxxxxxxYOUR_API_KEYxxxxxx",
    "FolderId": "b1gxxxxxxxFOLDERIDxxxxxx",
    "UseBearerToken": false,
    "DefaultSourceLang": "zh",
    "DefaultTargetLang": "en",
    "GlossaryPath": "glossary.json"
  },
  "Limits": {
    "MaxCharsPerRequest": 10000,
    "MaxGlossaryPairs": 50
  },
  "Files": {
    "DefaultInput": "input.txt",
    "DefaultOutput": "output.txt"
  }
}
```

* `ApiKey` ‚Äî –∫–ª—é—á –æ—Ç —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –≤ [Yandex Cloud Translate](https://yandex.cloud/ru/docs/translate/).
* `FolderId` ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞—Ç–∞–ª–æ–≥–∞ (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è REST).
* `GlossaryPath` ‚Äî –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —Ç–µ—Ä–º–∏–Ω–æ–≤ (`glossary.json`).
* `MaxCharsPerRequest` ‚Äî –ª–∏–º–∏—Ç —Å–∏–º–≤–æ–ª–æ–≤ –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ –∫ API (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10 000).

---

## üìñ –§–æ—Ä–º–∞—Ç –≥–ª–æ—Å—Å–∞—Ä–∏—è (`glossary.json`)

```json
[
  { "src": "ÂâëÈÅì", "dst": "Swordsmanship", "exact": true },
  { "src": "Â•óË∑Ø", "dst": "Form", "exact": true },
  { "src": "‰∏çÂ§ú‰∫¨", "dst": "City of Eternal Night", "exact": true },
  { "src": "Ê±üÊπñ", "dst": "Jianghu", "exact": false }
]
```

> `exact: true` ‚Äî —Ç–µ—Ä–º–∏–Ω –∑–∞–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ç–æ—á–Ω–æ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏.
> `exact: false` ‚Äî –º—è–≥–∫–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ (–ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ–±—â–∏—Ö —Å–ª–æ–≤, —Ç–æ–ø–æ–Ω–∏–º–æ–≤ –∏ —Ç. –ø.).

---

## üßë‚Äçüíª –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1Ô∏è‚É£ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∏–º—ã—Ö —Å—Ç—Ä–æ–∫

```bash
LocoTool extract input.txt strings.tsv
```

–°–æ–∑–¥–∞—ë—Ç—Å—è —Ñ–∞–π–ª `strings.tsv` —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏:

```
original_line_no	field_index	record_id_guess	orig_text	translated_text
```

### 2Ô∏è‚É£ –ú–∞—à–∏–Ω–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å

```bash
LocoTool translate strings.tsv strings_out.tsv
```

`translated_text` –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω –∞–Ω–≥–ª–∏–π—Å–∫–∏–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏.

### 3Ô∏è‚É£ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞ –æ–±—Ä–∞—Ç–Ω–æ

```bash
LocoTool apply input.txt strings_out.tsv output.txt
```

–†–µ–∑—É–ª—å—Ç–∞—Ç (`output.txt`) ‚Äî —Ç–æ—Ç –∂–µ —Ñ–∞–π–ª, –Ω–æ —Å–æ –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏.

### 4Ô∏è‚É£ –ü–æ–ª–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ü–∏–∫–ª

```bash
LocoTool all input.txt output.txt
```

–û–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

1. –ò–∑–≤–ª–µ–∫–∞–µ—Ç CJK-—Å—Ç—Ä–æ–∫–∏;
2. –ü–µ—Ä–µ–≤–æ–¥–∏—Ç –∏—Ö —Å —É—á—ë—Ç–æ–º –≥–ª–æ—Å—Å–∞—Ä–∏—è;
3. –°–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ.

---

## üì¶ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã CLI

| –ê—Ä–≥—É–º–µ–Ω—Ç               | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                 |
| ---------------------- | ---------------------------------------------------------- |
| `--config path.json`   | –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥—Ä—É–≥–æ–π –∫–æ–Ω—Ñ–∏–≥ –≤–º–µ—Å—Ç–æ `config.json`.              |
| `--glossary path.json` | –ó–∞–¥–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å —Ç–µ—Ä–º–∏–Ω–æ–≤.                    |
| `--apply-empty`        | –†–∞–∑—Ä–µ—à–∏—Ç—å –∑–∞—Ç–∏—Ä–∞—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –ø—É—Å—Ç—ã–º–∏ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏. |
| `--help`               | –í—ã–≤–æ–¥ –∫—Ä–∞—Ç–∫–æ–π —Å–ø—Ä–∞–≤–∫–∏.                                     |

---

## üìö –ü—Ä–∏–º–µ—Ä –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### input.txt

```text
162510#0#ÁéÑÂÜ•ÂèåÁîü#7#ÈªÑÊ≥âÂºïË∑ØÔºåÂÜ∞Áã±ÂèåÁîüÔºÅÁúüÊ∞îÂΩªÈ™®ÊûÅÂØí...#
40100#ËãóÂú©#
109750#Âä†Â•óË∑Ø‰º§ÂÆ≥#1#41#...#ÂâëÈÅì#ÂΩìÂâëÊúØÂ§ß‰∫é200ÔºåÂ•óË∑Ø‰∏∫Ââë...#
```

### strings.tsv (—Ñ—Ä–∞–≥–º–µ–Ω—Ç)

```
original_line_no	field_index	record_id_guess	orig_text	translated_text
1	2	162510	ÁéÑÂÜ•ÂèåÁîü	Xuanming Twins
1	4	162510	ÈªÑÊ≥âÂºïË∑ØÔºåÂÜ∞Áã±ÂèåÁîüÔºÅÁúüÊ∞îÂΩªÈ™®ÊûÅÂØí...	Path of the Underworld, Frostbound Twins! ...
3	5	109750	ÂâëÈÅì	Swordsmanship
```

–ü–æ—Å–ª–µ `apply` —Ñ–∞–π–ª `output.txt` –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–∑–∏—Ü–∏—è—Ö.

---

## üß© –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

* **CSnakes** –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å Python-–∫–æ–¥ `loctool.py` –Ω–∞–ø—Ä—è–º—É—é –∏–∑ C#, –±–µ–∑ –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–æ–≤.
* **REST-–∫–ª–∏–µ–Ω—Ç** —Ä–µ–∞–ª–∏–∑—É–µ—Ç `POST /translate/v2/translate` —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π `Api-Key`.
* **GlossaryLoader** –∏ **AppConfig** –æ—Ç–≤–µ—á–∞—é—Ç –∑–∞ –∑–∞–≥—Ä—É–∑–∫—É `glossary.json` –∏ `config.json`.
* **Batch-—Ä–µ–∂–∏–º** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–∂–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –ø–æ –ª–∏–º–∏—Ç—É 10 000 —Å–∏–º–≤–æ–ª–æ–≤.
* –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ `#` –∏ –ø—É—Å—Ç—ã–µ –ø–æ–ª—è.

---

## üßæ –¢–∏–ø–æ–≤–æ–π workflow

```bash
# 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏ –≥–ª–æ—Å—Å–∞—Ä–∏–π
nano config.json
nano glossary.json

# 2. –ò–∑–≤–ª–µ—á—å —Å—Ç—Ä–æ–∫–∏
LocoTool extract input.txt strings.tsv

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å/–¥–æ–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –≤—Ä—É—á–Ω—É—é –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
nano strings.tsv

# 4. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã
LocoTool apply input.txt strings.tsv output.txt

# 5. (–∏–ª–∏ –æ–¥–Ω–∏–º —à–∞–≥–æ–º)
LocoTool all input.txt output.txt
```

---

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è

* –ú–∞–∫—Å–∏–º—É–º **10 000 —Å–∏–º–≤–æ–ª–æ–≤** –≤ –æ–¥–Ω–æ–º REST-–∑–∞–ø—Ä–æ—Å–µ.
* –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã (`#`-—Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã).
* –ì–ª–æ—Å—Å–∞—Ä–∏–π –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (–¥–æ 50 —Ç–µ—Ä–º–∏–Ω–æ–≤).
* –î–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å **Yandex Translate API**.

---

## üß© –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ¬© 2025
–ê–≤—Ç–æ—Ä: *locky37*